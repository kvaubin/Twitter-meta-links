<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Twitter Preview</title>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Example Tweet">
    <meta property="og:description" content="A custom tweet preview with the Twitter bird logo instead of the X logo.">
    <meta property="og:image" content="https://github.com/kvaubin/Twitter-meta-links/blob/main/IMG_1225.png?raw=true">
    <meta property="og:url" content="https://yourwebsite.com/share-tweet?url=https://twitter.com/exampleTweet">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Example Tweet">
    <meta name="twitter:description" content="A custom tweet preview with the Twitter bird logo instead of the X logo.">
    <meta name="twitter:image" content="https://github.com/kvaubin/Twitter-meta-links/blob/main/IMG_1225.png?raw=true">

</head>
<body>
    <h1>Custom Tweet Preview</h1>
    <div id="tweet-container">
        <p>Loading tweet...</p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const tweetUrl = urlParams.get('url');

        // Replace with your Bearer Token (Twitter API v2)
        const BEARER_TOKEN = 'AAAAAAAAAAAAAAAAAAAAAM4xxwEAAAAADmkdzdOHb0rQ8R7WaCDdr7qoxAw%3DCYzSoSuxDnfpsdmEl4uJCkn09CQJsQBCs3gJXqTuKi0jYM56Zp';

        async function fetchTweetData(tweetUrl) {
            const tweetId = tweetUrl.split('/').pop();  // Extract Tweet ID from URL
            const tweetApiUrl = `https://api.twitter.com/2/tweets/${tweetId}`;

            // CORS proxy URL
            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';

            try {
                const response = await fetch(proxyUrl + tweetApiUrl, {
                    headers: {
                        'Authorization': `Bearer ${BEARER_TOKEN}`,
                        'X-Requested-With': 'XMLHttpRequest'  // Required by CORS Proxy
                    }
                });
                const data = await response.json();
                displayTweet(data);
            } catch (error) {
                console.error('Error fetching tweet:', error);
            }
        }

        function displayTweet(data) {
            const tweet = data.data;
            const tweetText = tweet.text;
            const userName = tweet.author_id;  // You may need to fetch user details based on author_id

            // Display the tweet on the page
            const tweetContainer = document.getElementById('tweet-container');
            tweetContainer.innerHTML = `
                <h2>Tweet from User ID: ${userName}</h2>
                <p>${tweetText}</p>
                <img src="https://github.com/kvaubin/Twitter-meta-links/blob/main/IMG_1225.png?raw=true" alt="Twitter Bird Logo">
            `;
        }

        if (tweetUrl) {
            fetchTweetData(tweetUrl);
        }
    </script>
</body>
</html>
